<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
    <!-- 引入 echarts.js -->
    <script src="vendor/echarts.js"></script>
    <script src="vendor/jquery.min.js"></script>
</head>
<body>
<div id="main" style="width: 600px;height:400px;"></div>
<script>
    var raw = [];

    $.get('http://127.0.0.1:5000/transtrend').done(function (data) {
        raw = data
    })

    var sum = 0.0
    var data = raw.map(function(x) {
        var d = new Date(x.date)
        sum += x.rate
        return {
            "name": d.toString(),
            "value": [
                [d.getFullYear(), d.getMonth() + 1, d.getDate()].join('/'),
                sum
            ]
        }
    })

    option = {
        title: {
            text: 'Transtrend'
        },
        tooltip: {
            trigger: 'axis',
            formatter: function (params) {
                params = params[0];
                var date = new Date(params.name);
                return date.getDate() + '/' + (date.getMonth() + 1) + '/' + date.getFullYear() + ' : ' + params.value[1];
            },
            axisPointer: {
                animation: false
            }
        },
        xAxis: {
            type: 'time',
            splitLine: {
                show: false
            }
        },
        yAxis: {
            type: 'value',
            boundaryGap: [0, '100%'],
            splitLine: {
                show: false
            }
        },
        series: [{
            name: '模拟数据',
            type: 'line',
            showSymbol: false,
            hoverAnimation: false,
            data: data
        }]
    };

    var myChart = echarts.init(document.getElementById('main'));
    myChart.setOption(option);
</script>
</body>
</html>